<!DOCTYPE html>
<html>
  <head>
    <title>XiaoLong Express</title>
    <link rel="stylesheet" href="styles/header.css" />
    <link rel="stylesheet" href="styles/general.css" />
    <link rel="stylesheet" href="styles/menu.css" />
    <link rel="icon" href="header/logo.png" type="image/png" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss"></style>
  </head>
  <body>
    <header>
      <div class="header">
        <div class="left-section">
          <img class="logo" src="header/logo.png" />
          <p>XiaoLong Express</p>
        </div>

        <div class="middle-section">
          <div class="nav">
            <ul>
              <a href="xiaolong.html">
                <li>Home</li>
              </a>
              <a href="menu.html">
                <li>Menu</li>
              </a>
            </ul>
          </div>
        </div>

        <div class="right-section">
          <p></p>
          <button id="logout-button" class="login">Logout</button>
          <a href="cart.html">
            <div
              id="cart-count"
              class="bg-red-800 w-4 h-4 rounded-full absolute top-[10px] right-[70px] flex justify-center items-center text-white text-sm"
            ></div>
            <svg
              class="basket"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 576 512"
            >
              <!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
              <path
                d="M253.3 35.1c6.1-11.8 1.5-26.3-10.2-32.4s-26.3-1.5-32.4 10.2L117.6 192 32 192c-17.7 0-32 14.3-32 32s14.3 32 32 32L83.9 463.5C91 492 116.6 512 146 512L430 512c29.4 0 55-20 62.1-48.5L544 256c17.7 0 32-14.3 32-32s-14.3-32-32-32l-85.6 0L365.3 12.9C359.2 1.2 344.7-3.4 332.9 2.7s-16.3 20.6-10.2 32.4L404.3 192l-232.6 0L253.3 35.1zM192 304l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16s16 7.2 16 16zm96-16c8.8 0 16 7.2 16 16l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16zm128 16l0 96c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-96c0-8.8 7.2-16 16-16s16 7.2 16 16z"
              />
            </svg>
          </a>
        </div>
      </div>
    </header>
    <div id="container" class="container">
      <div id="food-menu" class="food-menu">
        <div id="chao-fan">
          <a name="chao-fan"><h3 id="category-name">Chao Fan</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img
                src="food-menu/chowfan/pork-shrimp-siomai-chaofan.png"
                alt=""
              />
              <p class="item-name">Pork & Shrimp Siomai</p>
              <p class="item-price"><span>&#8369;</span>144</p>
            </div>
            <div class="item-card">
              <img src="food-menu/chowfan/braised-beef.png" alt="" />
              <p class="item-name">Braised Beef</p>
              <p class="item-price"><span>&#8369;</span>139</p>
            </div>
            <div class="item-card">
              <img src="food-menu/chowfan/salt-pepper-pork.png " alt="" />
              <p class="item-name">Salt & Pepper Pork</p>
              <p class="item-price"><span>&#8369;</span>129</p>
            </div>
            <div class="item-card">
              <img src="food-menu/chowfan/japanese-siomai-chaofan.png" alt="" />
              <p class="item-name">Japanese Siomai</p>
              <p class="item-price"><span>&#8369;</span>124</p>
            </div>
            <div class="item-card">
              <img
                src="food-menu/chowfan/salt-pepper-chicken-chaofan.png"
                alt=""
              />
              <p class="item-name">Salt & Pepper Chicken</p>
              <p class="item-price"><span>&#8369;</span>119</p>
            </div>
            <div class="item-card">
              <img
                src="food-menu/chowfan/pork-shrimp-siomai-chaofan.png"
                alt=""
              />
              <p class="item-name">Sharksfin</p>
              <p class="item-price"><span>&#8369;</span>114</p>
            </div>
            <div class="item-card">
              <img src="food-menu/chowfan/pork-veggie-dumpling.png" alt="" />
              <p class="item-name">Pork & Veggi Dumpling</p>
              <p class="item-price"><span>&#8369;</span>99</p>
            </div>
          </div>
        </div>
        <div id="noodle-soup">
          <a name="noodle-soup"> <h3 id="category-name">Noodle Soup</h3> </a>
          <div class="category-container">
            <div class="item-card">
              <img
                src="food-menu/noodle-soup/beef-wonton-noodle-soup.png"
                alt=""
              />
              <p class="item-name">Beef Wonton Noodle Soup</p>
              <p class="item-price"><span>&#8369;</span>149</p>
            </div>
            <div class="item-card">
              <img src="food-menu/noodle-soup/beef-noodle-soup.png" alt="" />
              <p class="item-name">Beef Noodle Soup</p>
              <p class="item-price"><span>&#8369;</span>119</p>
            </div>
            <div class="item-card">
              <img src="food-menu/noodle-soup/wonton-noodle-soup.png" alt="" />
              <p class="item-name">Wonton Noodle Soup</p>
              <p class="item-price"><span>&#8369;</span>109</p>
            </div>
            <div class="item-card">
              <img src="food-menu/noodle-soup/chowmien.png" alt="" />
              <p class="item-name">Chowmien</p>
              <p class="item-price"><span>&#8369;</span>79</p>
            </div>
          </div>
        </div>
        <div id="dimsums">
          <a name="dimsums"><h3 id="category-name">Dimsums</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img src="food-menu/dimsums/hakaw.png" alt="" />
              <p class="item-name">Hakaw</p>
              <p class="item-price"><span>&#8369;</span>139</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/chinese-kikiam.png" alt="" />
              <p class="item-name">Chinese Kikiam</p>
              <p class="item-price"><span>&#8369;</span>129</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/chicken feet tausi.png" alt="" />
              <p class="item-name">Chicken Feet Taosi</p>
              <p class="item-price"><span>&#8369;</span>129</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/xiaolong-bao.png" alt="" />
              <p class="item-name">Xiaolong Bao (3pcs)</p>
              <p class="item-price"><span>&#8369;</span>99</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/pork-shrimp dimsum.png" alt="" />
              <p class="item-name">Pork & Shrimp</p>
              <p class="item-price"><span>&#8369;</span>99</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/japanese-siomai.png" alt="" />
              <p class="item-name">Japanese Siomai</p>
              <p class="item-price"><span>&#8369;</span>79</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/sharksfin.png" alt="" />
              <p class="item-name">Sharksfin</p>
              <p class="item-price"><span>&#8369;</span>69</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/pork-veggie-dumpling.png" alt="" />
              <p class="item-name">Pork & Veggi Dumpling</p>
              <p class="item-price"><span>&#8369;</span>59</p>
            </div>
            <div class="item-card">
              <img src="food-menu/dimsums/siopao-asado.png" alt="" />
              <p class="item-name">Siopao Asado</p>
              <p class="item-price"><span>&#8369;</span>39</p>
            </div>
          </div>
        </div>
        <div id="ramen">
          <a name="ramen"><h3 id="category-name">Ramen</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img src="food-menu/ramen/super chasu ramen.png" alt="" />
              <p class="item-name">Super Chashu</p>
              <p class="item-price"><span>&#8369;</span>199</p>
            </div>
            <div class="item-card">
              <img src="food-menu/ramen/naijiro red ramen.png" alt="" />
              <p class="item-name">Red Ramen</p>
              <p class="item-price"><span>&#8369;</span>189</p>
            </div>
            <div class="item-card">
              <img src="food-menu/ramen/tantanmen.png" alt="" />
              <p class="item-name">Tantanmen</p>
              <p class="item-price"><span>&#8369;</span>159</p>
            </div>
            <div class="item-card">
              <img src="food-menu/ramen/black garlic ramen.png" alt="" />
              <p class="item-name">Black Garlic Ramen</p>
              <p class="item-price"><span>&#8369;</span>149</p>
            </div>
            <div class="item-card">
              <img src="food-menu/ramen/tonkatsu-ramen.png" alt="" />
              <p class="item-name">Tonkotsu Ramen</p>
              <p class="item-price"><span>&#8369;</span>99</p>
            </div>
          </div>
        </div>
        <div id="rice-meal">
          <a name="rice-meal"><h3 id="category-name">Rice Meal</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img src="food-menu/rice-meals/katsu-curry.png" alt="" />
              <p class="item-name">Katsu Curry</p>
              <p class="item-price"><span>&#8369;</span>159</p>
            </div>
            <div class="item-card">
              <img src="food-menu/rice-meals/katsudon.png" alt="" />
              <p class="item-name">Katsudon</p>
              <p class="item-price"><span>&#8369;</span>149</p>
            </div>
            <div class="item-card">
              <img src="food-menu/rice-meals/Karaage Don.png" alt="" />
              <p class="item-name">Karaagedon</p>
              <p class="item-price"><span>&#8369;</span>119</p>
            </div>
            <div class="item-card">
              <img src="food-menu/rice-meals/Sweet & Sour Shrimp.png" alt="" />
              <p class="item-name">Sweet & Sour Shrimp</p>
              <p class="item-price"><span>&#8369;</span>149</p>
            </div>
            <div class="item-card">
              <img
                src="food-menu/rice-meals/Sweet & Sour Fish Fillet.png"
                alt=""
              />
              <p class="item-name">Sweet & Sour Fish Fillet</p>
              <p class="item-price"><span>&#8369;</span>119</p>
            </div>
          </div>
        </div>
        <div id="sides">
          <a name="sides"><h3 id="category-name">Sides</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img src="food-menu/sides/karaage.png" alt="" />
              <p class="item-name">Karaage</p>
              <p class="item-price"><span>&#8369;</span>119</p>
            </div>
            <div class="item-card">
              <img src="food-menu/sides/gyoza.png" alt="" />
              <p class="item-name">Gyoza(6pcs)</p>
              <p class="item-price"><span>&#8369;</span>89</p>
            </div>
            <div class="item-card">
              <img src="food-menu/sides/gyoza.png" alt="" />
              <p class="item-name">Gyoza(4pcs)</p>
              <p class="item-price"><span>&#8369;</span>59</p>
            </div>
          </div>
        </div>
        <div id="add-ons">
          <a name="addons"><h3 id="category-name">Add-ons</h3></a>
          <div class="category-container">
            <div class="item-card">
              <img src="food-menu/add-ons/ramen-broth.png" alt="" />
              <p class="item-name">Ramen Broth</p>
              <p class="item-price"><span>&#8369;</span>50</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/chashu.png" alt="" />
              <p class="item-name">Chashu</p>
              <p class="item-price"><span>&#8369;</span>35</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/chow-fan.png" alt="" />
              <p class="item-name">Chow Fan</p>
              <p class="item-price"><span>&#8369;</span>45</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/noodle.png" alt="" />
              <p class="item-name">Noodle</p>
              <p class="item-price"><span>&#8369;</span>25</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/eggs-1.png" alt="" />
              <p class="item-name">Fried/Boiled Egg</p>
              <p class="item-price"><span>&#8369;</span>20</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/nori-wakame.png" alt="" />
              <p class="item-name">Nori/Wakame</p>
              <p class="item-price"><span>&#8369;</span>25</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/black-fungus.png" alt="" />
              <p class="item-name">Black Fungus</p>
              <p class="item-price"><span>&#8369;</span>25</p>
            </div>
            <div class="item-card">
              <img src="food-menu/add-ons/rice.png" alt="" />
              <p class="item-name">Rice</p>
              <p class="item-price"><span>&#8369;</span>25</p>
            </div>
          </div>
        </div>
        <div id="cart-page"></div>
      </div>

      <div id="cart">
        <div>
          <h3 class="item-menu">Go for Hunt</h3>
          <div class="border1"></div>

          <a href="#chao-fan">
            <div class="list-card">
              <img
                src="food-menu/chowfan/pork-shrimp-siomai-chaofan.png"
                alt="list"
              />
              <p class="list-name">Chao Fan</p>
            </div>
          </a>

          <a href="#noodle-soup">
            <div class="list-card">
              <img
                src="food-menu/noodle-soup/beef-wonton-noodle-soup.png"
                alt="list"
              />
              <p class="list-name">Noodle Soup</p>
            </div>
          </a>

          <a href="#dimsums">
            <div class="list-card">
              <img src="food-menu/dimsums/pork-shrimp dimsum.png" alt="list" />
              <p class="list-name">Dimsums</p>
            </div>
          </a>

          <a href="#ramen">
            <div class="list-card">
              <img src="food-menu/ramen/tonkatsu-ramen.png" alt="list" />
              <p class="list-name">Ramen</p>
            </div>
          </a>

          <a href="#rice-meal">
            <div class="list-card" href="#">
              <img src="food-menu/rice-meals/katsu-curry.png" alt="list" />
              <p class="list-name">Rice Meal</p>
            </div>
          </a>

          <a href="#sides">
            <div class="list-card" href="#">
              <img src="food-menu/sides/karaage.png" alt="list" />
              <p class="list-name">Sides</p>
            </div>
          </a>

          <a href="#addons">
            <div class="list-card">
              <img src="food-menu/add-ons/noodle.png" alt="list" />
              <p class="list-name">Add-ons</p>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div
      id="overlay"
      class="h-full w-full top-0 z-10 bg-black fixed bg-black opacity-[40%] hidden"
    ></div>
    <div
      id="popup"
      class="h-full w-full top-0 z-10 fixed flex justify-center items-center hidden"
    >
      <div
        class="bg-white h-[760px] w-[600px] rounded-2xl shadow-2xl shadow-black overflow-hidden relative p-12"
        style="padding-top: 32px; padding: 20px"
      >
        <div>
          <div class="flex">
            <p
              id="popup-item-name"
              class="text-black text-3xl font-medium text-red-600"
            >
              Pork & Shrimp Siomai
            </p>
            <span
              id="popup-item-price"
              class="text-black text-3xl font-medium"
              style="margin-left: 10px"
              >&#8369;320</span
            >
          </div>
          <div class="w-full flex items-center justify-center h-[400px]">
            <img
              id="popup-item-img"
              src="food-menu/rice-meals/katsu-curry.png"
              class="h-[400px]"
            />
          </div>
          <div
            class="w-full h-[200px] flex flex-col justify-center items-center"
          >
            <p>qty</p>
            <textarea
              id="qty"
              class="border border-2 resize-none h-[100px] w-[100px] flex justify-center text-center text-3xl mt-10"
              style="padding-top: 25px"
              rows="1"
            ></textarea>
          </div>
          <button
            id="add-to-cart-button"
            class="relative overflow-hidden flex justify-center items-center w-full h-12 bg-red-800 rounded-sm mt-10 text-white text-2xl font-medium transition-transform duration-150 active:scale-95 group mx-10"
          >
            <span
              class="absolute inset-0 bg-black opacity-0 group-hover:opacity-[20%] transition-opacity duration-150"
            ></span>
            <span class="relative z-10">Add to Cart</span>
          </button>
        </div>
        <div
          id="close-popup"
          class="ml-10 text-2xl font-bold text-red-600 transform transition duration-200 hover:scale-130 active:scale-95 cursor-pointer"
          style="position: absolute; top: 16px; right: 32px"
        >
          X
        </div>
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const userid = localStorage.getItem("userid");
    if (!userid) {
      alert("Please login first");
      window.location.replace("login.html");
    }

    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();

        document.querySelector(this.getAttribute("href")).scrollIntoView({
          behavior: "smooth",
        });
      });
    });
  </script>
  <script>
    function closePopup() {
      const overlay = document.getElementById("overlay");
      overlay.classList =
        "h-full w-full top-0 z-10 bg-black fixed bg-black opacity-[40%] hidden";

      const popup = document.getElementById("popup");
      popup.classList =
        "h-full w-full top-0 z-10 fixed flex justify-center items-center hidden";
    }

    function openPopup() {
      const overlay = document.getElementById("overlay");
      overlay.classList =
        "h-full w-full top-0 z-10 bg-black fixed bg-black opacity-[40%]";

      const popup = document.getElementById("popup");
      popup.classList =
        "h-full w-full top-0 z-10 fixed flex justify-center items-center";
    }

    document.querySelectorAll(".item-card").forEach((card) => {
      card.addEventListener("click", () => {
        const name = card.querySelector(".item-name").textContent.trim();
        const price = card.querySelector(".item-price").textContent.trim();
        const imageSrc = card.querySelector("img").src;

        const popupName = document.getElementById("popup-item-name");
        popupName.innerText = name;

        const popupPrice = document.getElementById("popup-item-price");
        popupPrice.innerText = price;

        const popupImg = document.getElementById("popup-item-img");
        popupImg.src = imageSrc;

        openPopup();
      });
    });

    const addToCartButton = document.getElementById("add-to-cart-button");
    addToCartButton.addEventListener("click", async () => {
      const popupName = document.getElementById("popup-item-name");
      const popupPrice = document.getElementById("popup-item-price");
      const popupItemImg = document.getElementById("popup-item-img");
      const qtyText = document.getElementById("qty");

      const userid = localStorage.getItem("userid");
      const itemname = popupName.innerText;
      const price = parseInt(popupPrice.innerText.slice(1));
      const qty = parseInt(qtyText.value);
      const img = popupItemImg.src;

      if (Number.isNaN(qty)) {
        alert("Invalid qty");
      }

      const data = { userid, itemname, price, qty, img };

      try {
        const response = await axios.post(
          "http://localhost/restapi/api/cart.php",
          data
        );

        console.log(response.data);
        alert("Successfully added to cart");
        window.location.reload();
      } catch (e) {
        console.log(e);
        alert(e.response.data.message);
      }
    });

    const closePopupButton = document.getElementById("close-popup");
    closePopupButton.addEventListener("click", () => {
      closePopup();
    });
  </script>
  <script>
    async function updateCartNumber() {
      try {
        const userid = localStorage.getItem("userid");
        const response = await axios.get(
          `http://localhost/restapi/api/cart.php?userid=${userid}`
        );

        const cartNumber = response.data.length;
        document.getElementById("cart-count").innerText = cartNumber;
      } catch {
        console.log(e);
        alert(e.response.data.message);
      }
    }
    updateCartNumber();

    document.getElementById("logout-button").addEventListener("click", () => {
      localStorage.removeItem("use0rid");
      window.location.replace("/login.html");
    });
  </script>
</html>
